<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LangGraphå¤šæ™ºèƒ½ä½“ç³»ç»Ÿ - é›†æˆæµ‹è¯•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="config.js"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-4xl font-bold mb-8 text-center">
            ğŸ¤– LangGraphå¤šæ™ºèƒ½ä½“ç³»ç»Ÿ
        </h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <!-- åç«¯çŠ¶æ€ -->
            <div class="bg-gray-800 p-6 rounded-lg">
                <h2 class="text-2xl font-semibold mb-4 flex items-center">
                    <span class="mr-2">ğŸ”§</span>
                    åç«¯æœåŠ¡çŠ¶æ€
                </h2>
                <div id="backend-status" class="space-y-2">
                    <div class="flex justify-between">
                        <span>è¿æ¥çŠ¶æ€:</span>
                        <span id="backend-connection" class="text-yellow-400">æ£€æŸ¥ä¸­...</span>
                    </div>
                    <div class="flex justify-between">
                        <span>APIåœ°å€:</span>
                        <span class="text-blue-400">http://localhost:8000</span>
                    </div>
                    <div class="flex justify-between">
                        <span>å“åº”æ—¶é—´:</span>
                        <span id="backend-response-time" class="text-gray-400">-</span>
                    </div>
                </div>
                <button onclick="testBackend()" class="mt-4 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded">
                    æµ‹è¯•åç«¯è¿æ¥
                </button>
            </div>
            
            <!-- å‰ç«¯çŠ¶æ€ -->
            <div class="bg-gray-800 p-6 rounded-lg">
                <h2 class="text-2xl font-semibold mb-4 flex items-center">
                    <span class="mr-2">ğŸŒ</span>
                    å‰ç«¯æœåŠ¡çŠ¶æ€
                </h2>
                <div class="space-y-2">
                    <div class="flex justify-between">
                        <span>æœåŠ¡çŠ¶æ€:</span>
                        <span class="text-green-400">âœ… è¿è¡Œä¸­</span>
                    </div>
                    <div class="flex justify-between">
                        <span>æœåŠ¡åœ°å€:</span>
                        <span class="text-blue-400">http://localhost:3000</span>
                    </div>
                    <div class="flex justify-between">
                        <span>å½“å‰é¡µé¢:</span>
                        <span class="text-green-400">test.html</span>
                    </div>
                </div>
                <a href="88.html" class="mt-4 inline-block bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded">
                    è®¿é—®ä¸»ç•Œé¢
                </a>
            </div>
        </div>
        
        <!-- APIæµ‹è¯•åŒºåŸŸ -->
        <div class="bg-gray-800 p-6 rounded-lg mb-8">
            <h2 class="text-2xl font-semibold mb-4 flex items-center">
                <span class="mr-2">ğŸ”—</span>
                APIé›†æˆæµ‹è¯•
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <button onclick="testHealthCheck()" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded">
                    å¥åº·æ£€æŸ¥
                </button>
                <button onclick="testGetTasks()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded">
                    è·å–ä»»åŠ¡åˆ—è¡¨
                </button>
                <button onclick="testCreateTask()" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded">
                    åˆ›å»ºæµ‹è¯•ä»»åŠ¡
                </button>
            </div>
            
            <div class="bg-gray-900 p-4 rounded-lg">
                <h3 class="text-lg font-semibold mb-2">æµ‹è¯•ç»“æœ:</h3>
                <pre id="test-results" class="text-sm text-gray-300 whitespace-pre-wrap">ç­‰å¾…æµ‹è¯•...</pre>
            </div>
        </div>
        
        <!-- ç³»ç»Ÿä¿¡æ¯ -->
        <div class="bg-gray-800 p-6 rounded-lg">
            <h2 class="text-2xl font-semibold mb-4 flex items-center">
                <span class="mr-2">ğŸ“Š</span>
                ç³»ç»Ÿä¿¡æ¯
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <h3 class="text-lg font-semibold mb-2">åç«¯åŠŸèƒ½:</h3>
                    <ul class="space-y-1 text-sm">
                        <li>âœ… FastAPIåº”ç”¨æ¡†æ¶</li>
                        <li>âœ… å¤šæ™ºèƒ½ä½“å·¥ä½œæµ</li>
                        <li>âœ… ä»»åŠ¡ç®¡ç†API</li>
                        <li>âœ… çŠ¶æ€ç®¡ç†ç³»ç»Ÿ</li>
                        <li>âœ… é”™è¯¯å¤„ç†æœºåˆ¶</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-2">å‰ç«¯åŠŸèƒ½:</h3>
                    <ul class="space-y-1 text-sm">
                        <li>âœ… å“åº”å¼ç•Œé¢</li>
                        <li>âœ… å®æ—¶æ•°æ®å±•ç¤º</li>
                        <li>âœ… ä»»åŠ¡ç®¡ç†ç•Œé¢</li>
                        <li>âœ… æ™ºèƒ½ä½“ç›‘æ§</li>
                        <li>âœ… APIé›†æˆ</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let apiClient;
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            if (window.apiClient) {
                apiClient = window.apiClient;
                testBackend();
            } else {
                console.error('APIå®¢æˆ·ç«¯æœªåŠ è½½');
            }
        });
        
        // æµ‹è¯•åç«¯è¿æ¥
        async function testBackend() {
            const statusEl = document.getElementById('backend-connection');
            const timeEl = document.getElementById('backend-response-time');
            
            statusEl.textContent = 'æ£€æŸ¥ä¸­...';
            statusEl.className = 'text-yellow-400';
            
            try {
                const startTime = Date.now();
                const response = await fetch('http://localhost:8000/health');
                const endTime = Date.now();
                const responseTime = endTime - startTime;
                
                if (response.ok) {
                    statusEl.textContent = 'âœ… è¿æ¥æ­£å¸¸';
                    statusEl.className = 'text-green-400';
                    timeEl.textContent = responseTime + 'ms';
                } else {
                    statusEl.textContent = 'âŒ è¿æ¥å¼‚å¸¸';
                    statusEl.className = 'text-red-400';
                }
            } catch (error) {
                statusEl.textContent = 'âŒ è¿æ¥å¤±è´¥';
                statusEl.className = 'text-red-400';
                console.error('åç«¯è¿æ¥æµ‹è¯•å¤±è´¥:', error);
            }
        }
        
        // æµ‹è¯•å¥åº·æ£€æŸ¥
        async function testHealthCheck() {
            const resultsEl = document.getElementById('test-results');
            resultsEl.textContent = 'æ­£åœ¨æµ‹è¯•å¥åº·æ£€æŸ¥...';
            
            try {
                const response = await fetch('http://localhost:8000/health');
                const data = await response.json();
                
                resultsEl.textContent = 'å¥åº·æ£€æŸ¥ç»“æœ:\\n' + JSON.stringify(data, null, 2);
            } catch (error) {
                resultsEl.textContent = 'å¥åº·æ£€æŸ¥å¤±è´¥:\\n' + error.message;
            }
        }
        
        // æµ‹è¯•è·å–ä»»åŠ¡åˆ—è¡¨
        async function testGetTasks() {
            const resultsEl = document.getElementById('test-results');
            resultsEl.textContent = 'æ­£åœ¨è·å–ä»»åŠ¡åˆ—è¡¨...';
            
            try {
                const response = await fetch('http://localhost:8000/api/v1/tasks');
                const data = await response.json();
                
                resultsEl.textContent = 'ä»»åŠ¡åˆ—è¡¨ç»“æœ:\\n' + JSON.stringify(data, null, 2);
            } catch (error) {
                resultsEl.textContent = 'è·å–ä»»åŠ¡åˆ—è¡¨å¤±è´¥:\\n' + error.message;
            }
        }
        
        // æµ‹è¯•åˆ›å»ºä»»åŠ¡
        async function testCreateTask() {
            const resultsEl = document.getElementById('test-results');
            resultsEl.textContent = 'æ­£åœ¨åˆ›å»ºæµ‹è¯•ä»»åŠ¡...';
            
            const taskData = {
                title: 'å‰ç«¯é›†æˆæµ‹è¯•ä»»åŠ¡',
                description: 'è¿™æ˜¯ä¸€ä¸ªä»å‰ç«¯åˆ›å»ºçš„æµ‹è¯•ä»»åŠ¡',
                task_type: 'test',
                priority: 1,
                requirements: ['å‰ç«¯é›†æˆæµ‹è¯•'],
                constraints: ['æµ‹è¯•ç¯å¢ƒ']
            };
            
            try {
                const response = await fetch('http://localhost:8000/api/v1/tasks', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(taskData)
                });
                
                if (response.ok) {
                    const data = await response.json();
                    resultsEl.textContent = 'ä»»åŠ¡åˆ›å»ºæˆåŠŸ:\\n' + JSON.stringify(data, null, 2);
                } else {
                    const errorData = await response.text();
                    resultsEl.textContent = 'ä»»åŠ¡åˆ›å»ºå¤±è´¥:\\nçŠ¶æ€ç : ' + response.status + '\\né”™è¯¯ä¿¡æ¯: ' + errorData;
                }
            } catch (error) {
                resultsEl.textContent = 'ä»»åŠ¡åˆ›å»ºå¤±è´¥:\\n' + error.message;
            }
        }
    </script>
</body>
</html>